/* ===== ç™½ãƒ™ãƒ¼ã‚¹ã®è¦‹ã‚„ã™ã„UI + 3Dãƒœã‚¿ãƒ³ï¼ˆã‚¯ãƒªãƒƒã‚¯æ„Ÿï¼‰ ===== */
:root{
  --bg: #ffffff;
  --panel: #ffffff;
  --text: #0f172a;
  --muted: #475569;
  --border: #e5e7eb;
  --accent: #2563eb; /* é’ */
  --accent-2: #16a34a; /* ç·‘ */
  --danger: #b91c1c; /* èµ¤ */
  --shadow: 0 8px 24px rgba(0,0,0,.08), 0 4px 10px rgba(0,0,0,.06);
  --radius: 14px;
}


*{ box-sizing: border-box; }
html,body{ height:100%; }
body{
  margin:0; background:var(--bg); color:var(--text);
  font-family: "Noto Sans JP", system-ui, -apple-system, Segoe UI, Roboto, "Hiragino Kaku Gothic ProN", Meiryo, sans-serif;
}
.hidden{ display:none !important; }
.view{ display:none; }
.view.active{ display:block; }

/* â–¼â–¼ è¿½åŠ ï¼šã‚¢ãƒ—ãƒªè¡¨ç¤ºä¸­ã¯â€œã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼é ˜åŸŸã®ã¿â€ãŒã‚¹ã‚¯ãƒ­ãƒ¼ãƒ« â–¼â–¼ */
html, body { height: 100%; }                 /* ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆåŸºæº–ã‚’å®‰å®šåŒ– */
#appView.view.active{
  display: flex;                              /* ç¸¦ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼ˆactive ã®ã¨ãã®ã¿è¡¨ç¤ºï¼‰ */
  flex-direction: column;
  height: 100vh;                              /* å…¨é«˜ã«ãƒ•ã‚£ãƒƒãƒˆï¼ˆè¦ªã‚’ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã•ã›ãªã„ï¼‰ */
  overflow: hidden;                           /* ç”»é¢æœ¬ä½“ã®ç¸¦ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’æŠ‘æ­¢ */
}
/* â–²â–² è¿½åŠ ã“ã“ã¾ã§ â–²â–² */

/* ---- Login ---- */
.app-title{ margin:0 0 12px; font-size:22px; font-weight:700; letter-spacing:.02em; }
.login-card{ width:min(420px, calc(100% - 32px)); margin:8vh auto; padding:28px; background:var(--panel);
  border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow); position:relative; }
.lbl{ font-size:13px; color:var(--muted); display:block; margin:12px 0 6px; }
.txt{ width:100%; padding:12px 14px; border:1px solid var(--border); border-radius:10px; font-size:16px; outline:none; }
.txt:focus{ border-color:var(--accent); box-shadow:0 0 0 3px rgba(37,99,235,.18); }
.error{ color:var(--danger); min-height:1.2em; margin-top:8px; }
.w-100{ width:100%; }

/* è¿½åŠ ï¼šãƒ­ã‚°ã‚¤ãƒ³é€ä¿¡ãƒœã‚¿ãƒ³ã‚’éè¡¨ç¤ºï¼ˆEnterã§é€ä¿¡ï¼‰ */
#loginForm [type="submit"]{ display:none !important; }


/* ãƒ­ã‚°ã‚¤ãƒ³ä¸­ã®ã‹ã‚ã„ã„ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚° */
.login-loading{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  background:rgba(255,255,255,.9);
  backdrop-filter:blur(2px);
  border-radius:var(--radius);
  z-index:20;
}
.login-loading-inner{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:6px;
  font-size:14px;
  color:var(--muted);
}
.login-loading-icon{
  font-size:30px;
  animation:bounce-y 0.9s infinite ease-in-out;
}
.login-loading-text{
  display:flex;
  align-items:flex-end;
  gap:2px;
}
.login-loading-text .dot{
  animation:dot-blink 1.2s infinite;
}
.login-loading-text .dot:nth-child(2){ animation-delay:0.15s; }
.login-loading-text .dot:nth-child(3){ animation-delay:0.3s; }

@keyframes bounce-y{
  0%,100%{ transform:translateY(0); }
  50%{ transform:translateY(-4px); }
}
@keyframes dot-blink{
  0%,20%{ opacity:0; }
  50%{ opacity:1; }
  100%{ opacity:0; }
}


/* ---- Topbar ---- */
.topbar{ position:sticky; top:0; z-index:10; display:flex; align-items:center; justify-content:space-between;
  gap:8px; padding:10px 14px; background:var(--panel); border-bottom:1px solid var(--border); }
.topbar .left{ display:flex; align-items:center; gap:10px; }
.topbar .right{ display:flex; align-items:center; gap:10px; }
.period{ color:var(--muted); font-size:14px; }

/* ---- Buttons (3D) ---- */
.btn{ position:relative; display:inline-flex; align-items:center; justify-content:center; gap:.5em;
  padding:10px 14px; border-radius:12px; border:1px solid var(--border); background:#fff; cursor:pointer;
  box-shadow: 0 6px 0 rgba(0,0,0,.08), 0 12px 24px rgba(0,0,0,.06);
  transition: transform .05s ease, box-shadow .2s ease, filter .2s ease; user-select:none; }
.btn:active{ transform: translateY(2px); box-shadow: 0 4px 0 rgba(0,0,0,.10), 0 8px 18px rgba(0,0,0,.08); }
.btn-ghost{ background:#fff; }
.btn-primary{ background:var(--accent); border-color:transparent; color:#fff; }
.btn-accent{ background:var(--accent-2); border-color:transparent; color:#fff; }
.btn-outline{ background:#fff; color:var(--text); }
.btn-danger{ background:var(--danger); border-color:transparent; color:#fff; }
.btn:focus-visible{ outline:3px solid rgba(37,99,235,.35); outline-offset:2px; }
/* å°ã•ã„ãƒœã‚¿ãƒ³ï¼ˆã‚»ãƒ«ã‚¯ãƒªã‚¢ç”¨ï¼‰ */
.btn-sm {
  padding: 2px 8px;
  font-size: 0.85em;
  margin-left: 4px;
}
/* Rippleï¼ˆã‚¯ãƒªãƒƒã‚¯æ„Ÿå¼·åŒ–ï¼‰ */
.btn .ripple{ position:absolute; border-radius:999px; transform:scale(0); opacity:.45; pointer-events:none;
  background:currentColor; mix-blend-mode:multiply; animation:ripple .6s ease-out; }
@keyframes ripple{ to{ transform:scale(14); opacity:0; } }

/* ---- Toolbar ---- */
.toolbar{ display:flex; flex-wrap:wrap; align-items:center; gap:14px; padding:10px 14px; border-bottom:1px solid var(--border); }
.tool{ display:flex; align-items:center; gap:8px; }
.select{ padding:8px 10px; border:1px solid var(--border); border-radius:10px; background:#fff; }
.hint{ color:var(--muted); font-size:13px; }

/* ---- Grid ---- */
.grid-wrap{
  padding:14px;
  overflow:auto;               /* æ—¢å­˜ï¼šç¸¦æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ç™ºç”Ÿæºï¼ˆæ°´å¹³ãƒãƒ¼ã¯ã“ã“ã«æ®‹ã‚‹ï¼‰ */
  flex: 1 1 auto;              /* è¿½åŠ ï¼šå¯å¤‰é ˜åŸŸã¨ã—ã¦å æœ‰ */
  min-height: 0;               /* è¿½åŠ ï¼šãƒ•ãƒ¬ãƒƒã‚¯ã‚¹å­è¦ç´ ã®ç¸®ã¿åˆ¶ç´„ã‚’è§£é™¤ï¼ˆã¯ã¿å‡ºã—é˜²æ­¢ï¼‰ */
  scrollbar-gutter: stable both-edges; /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ã®è¡¨ç¤ºé ˜åŸŸã‚’ç¢ºä¿ï¼ˆæ¶ˆå¤±ãƒ»ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚ºãƒ¬é˜²æ­¢ï¼‰ */
}

.grid{ border-collapse:separate; border-spacing:0; width: max(100%, 1600px); background:#fff; }
.grid th, .grid td{ border:1px solid var(--border); padding:8px 10px; text-align:center; min-width:50px; }
.grid thead th{ position:sticky; top:0; background:#fff; z-index:1; }
.grid .col-emp{ position:sticky; left:0; z-index:2; background:#fff; min-width:200px; text-align:left; }
.grid .holiday{ background:#fff7f7; color:#b91c1c; }
/* 4é€±å¸¯ï¼šç¶²ç›®çŠ¶ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ï¼ˆå…ƒã®æ›œæ—¥è‰²ã‚’é€ã‹ã™ï¼‰ */
.grid .range4w{
  background-image:
    repeating-linear-gradient( 45deg, rgba(37,99,235,.16) 0 2px, transparent 2px 8px),
    repeating-linear-gradient(-45deg, rgba(37,99,235,.12) 0 2px, transparent 2px 8px);
  background-origin: padding-box;
}

.grid .off{ background:#f8fafc; color:#0f172a; font-weight:700; }
.grid .dow{ display:block; font-size:11px; color:var(--muted); }
.grid .today{ outline:2px solid rgba(37,99,235,.35); outline-offset:-2px; }

/* 4é€±ãƒãƒ¼ã‚¯é›†è¨ˆã‚»ãƒ«ï¼ˆç¸¦å¹…ã‚’è©°ã‚ã¤ã¤äºŒæ®µè¡¨ç¤ºï¼‰ */
.grid td.month-marks{
  padding:4px 6px;
  font-size:12px;
  line-height:1.2;
  white-space:normal;
  min-width:90px;
}
.grid .col-month-marks{
  min-width:90px;
}
.month-marks .mm-row{
  display:block;
  text-align:center;
}

/* 4é€±ä¼‘æ—¥é›†è¨ˆã‚»ãƒ« */
.grid td.month-off{
  padding:4px 6px;
  font-size:12px;
  min-width:60px;
  white-space:normal;
}

/* 4é€±æ™‚é–“ãƒ˜ãƒƒãƒ€ï¼ˆ2è¡Œè¡¨ç¤ºå‰æï¼‰ */
.grid .col-month-total{
  white-space:normal;
  line-height:1.2;
}




/* ç‰¹åˆ¥ä¼‘æš‡ã‚¿ã‚°ï¼ˆç¥/ä»£/å¹´/ãƒªï¼‰ */
.leave{ display:inline-block; padding:2px 6px; border-radius:8px; border:1px solid var(--border); font-size:12px; font-weight:700; }
.leave-h{ background:#fff7f7; color:#b91c1c; } /* ç¥ */
.leave-s{ background:#f3f4f6; color:#1f2937; } /* ä»£ */
.leave-p{ background:#f0fdf4; color:#14532d; } /* å¹´ */
.leave-r{ background:#eef6ff; color:#2563eb; } /* ãƒª */

/* --- é€±æœ«é…è‰²ï¼ˆåˆ—å˜ä½ï¼‰ã¨ç¥æ—¥å„ªå…ˆ --- */

/* æ—¥æ›œï¼èµ¤å¸¯ï¼ˆå¼·åˆ¶ï¼‰ */
.grid thead th.sun, .grid tbody td.sun {
  color: var(--danger) !important;
  background: #fff4f4 !important;
}
/* åœŸæ›œï¼é’å¸¯ï¼ˆå¼·åˆ¶ï¼‰ */
.grid thead th.sat, .grid tbody td.sat {
  color: var(--accent) !important;
  background: #eef6ff !important;
}

/* ç¥æ—¥ã¯æœ€å„ªå…ˆã§èµ¤ï¼ˆé€±æœ«æŒ‡å®šã‚ˆã‚Šå¼·ã„ï¼‰ */
.grid thead th.holiday, .grid tbody td.holiday {
  color: var(--danger) !important;
  background: #fff7f7 !important;
}

/* è‡ªå‹•å‰²å½“ã®ä¸Šæ›¸ãä¿è­·ã‚»ãƒ«ï¼ˆğŸ”’è¡¨ç¤ºï¼‹ã†ã£ã™ã‚‰ãƒãƒƒãƒãƒ³ã‚°ï¼‰ */
.grid tbody td.locked{
  position: relative;
  background-image:
    repeating-linear-gradient(45deg, rgba(0,0,0,.06) 0 6px, transparent 6px 12px);
}
.grid tbody td.locked::after{
  content: "ğŸ”’";
  position: absolute;
  top: 2px;
  right: 4px;
  font-size: 12px;
  opacity: .6;
  pointer-events: none;
}

/* ---- å‰²å½“ãƒãƒ¼ã‚¯è¡¨ç¤º ---- */
.mark { font-weight:800; font-size:16px; letter-spacing: .05em; }

.mark-day { }
.mark-night { }
.mark-ns { }
.mark-nf { }

/* ---- å±æ€§ãƒãƒƒãƒ—ï¼ˆå¾“æ¥­å“¡åã®æ¨ªï¼‰ ---- */
.chips{ display:inline-flex; gap:6px; margin-left:8px; vertical-align:middle; }
.chip{ display:inline-flex; align-items:center; gap:4px; padding:2px 6px; border-radius:999px; border:1px solid var(--border); font-size:12px; }
.chip.levelA{ border-color:#155e75; color:#155e75; background:#ecfeff; }
.chip.levelB{ border-color:#4c1d95; color:#4c1d95; background:#f5f3ff; }
.chip.levelC{ border-color:#14532d; color:#14532d; background:#f0fdf4; }
.chip.unitNS{ border-color:#7c2d12; color:#7c2d12; background:#fff7ed; }
.chip.unitNF{ border-color:#1f2937; color:#1f2937; background:#f3f4f6; }
.chip.unitGEN{ border-color:#334155; color:#334155; background:#f8fafc; }


/* ---- å±æ€§ãƒ€ã‚¤ã‚¢ãƒ­ã‚° ---- */
dialog.attr{ border:1px solid var(--border); border-radius:16px; padding:0; width:min(760px, calc(100% - 32px)); }
.attr header{ padding:14px; border-bottom:1px solid var(--border); font-weight:700; }
.attr .content{ max-height:60vh; overflow:auto; padding:10px 14px; }
.attr .row{ display:grid; grid-template-columns: 1fr 120px 120px 180px; gap:8px; align-items:center; padding:6px 0; }
.attr footer{ display:flex; justify-content:flex-end; gap:10px; padding:12px 14px; border-top:1px solid var(--border); }


/* ---- ååˆ—ã®ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³å±æ€§ã‚»ãƒ¬ã‚¯ã‚¿ ---- */
.col-emp .emp-wrap{ display:flex; align-items:center; gap:8px; }
.mini-select{
  padding:4px 6px; border:1px solid var(--border); border-radius:8px; background:#fff; font-size:12px;
}
.mini-select:focus{ border-color:var(--accent); box-shadow:0 0 0 2px rgba(37,99,235,.18); outline:none; }
.mini-select.level{ min-width:52px; }
.mini-select.work { min-width:60px; }

/* è¿½åŠ ï¼šå¾“æ¥­å“¡ç·¨é›†ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã®æ“ä½œãƒœã‚¿ãƒ³ */
.attr .ctrls{ display:flex; justify-content:flex-end; gap:6px; }
.attr .ctrls .btn{ padding:6px 8px; font-size:12px; }
.attr .ctrls .btn:active{ transform: translateY(1px); }

/* æ—¢å­˜ã®ã‚¹ã‚¿ã‚¤ãƒ« */
.attr .content .row .ctrls button + button { margin-left: .4rem; }

/* â˜…è¿½åŠ ï¼šç¦å¿Œãƒšã‚¢é¸æŠUIã®ã‚¹ã‚¿ã‚¤ãƒ« */
.forbid-wrap {
  display: flex;
  align-items: center;
  gap: 4px;
}

.forbid-select {
  min-width: 100px;
  max-width: 200px;
  height: auto;
  padding: 4px;
  border: 1px solid #d1d5db;
  border-radius: 4px;
  font-size: 0.875rem;
}

.forbid-select option {
  padding: 2px 4px;
}

.forbid-select option:checked {
  background-color: #3b82f6;
  color: white;
}

/* --- æœ«å°¾ã«è¿½åŠ  --- */

/* å‹¤å‹™æ™‚é–“è¨­å®šãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ */
.durations-wrap {
  animation: slideDown 0.2s ease-out;
}

@keyframes slideDown {
  from {
    opacity: 0;
    max-height: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    max-height: 500px;
    transform: translateY(0);
  }
}

.duration-field {
  transition: all 0.2s ease;
}

.duration-field:hover {
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  transform: translateY(-1px);
}

.duration-select {
  cursor: pointer;
  transition: border-color 0.2s ease;
}

.duration-select:hover {
  border-color: #3b82f6;
}

.duration-select:focus {
  outline: none;
  border-color: #2563eb;
  box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
}

.current-duration-label {
  font-style: italic;
}

/* å‹¤å‹™æ™‚é–“ç·¨é›†ãƒœã‚¿ãƒ³ã®å¼·èª¿ */
.btn-duration-toggle {
  font-size: 0.9em;
  padding: 6px 12px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border: none;
  transition: all 0.3s ease;
}

.btn-duration-toggle:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
}

